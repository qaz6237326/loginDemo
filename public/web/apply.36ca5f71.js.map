{"version":3,"sources":["webpack:///./modules/image/version.js","webpack:///./modules/apply/index.js","webpack:///./components/Title/index.js","webpack:///./modules/apply/containers/App.js"],"names":["_react","_interopRequireDefault","__webpack_require__","_reactRedux","_bere","_Title","App","props","_this","_classCallCheck","this","_defineProperty","_assertThisInitialized","_possibleConstructorReturn","_getPrototypeOf","call","that","_this$state","state","site","shop","version","dispatch","type","payload","callback","code","confirm","caption","text","then","result","ver_com_key","concat","history","replace","e","setState","target","value","React","Component","default","createElement","className","title","htmlFor","Input","id","placeholder","onChange","handleSiteChange","handleShopChange","handleVersionChange","style","fontSize","Button","disabled","loading","onClick","addRule","connect","_ref","apply","image","ruleInfos","_this$props","_this$props2","_this$props3","siteList","shopList","versionList","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_loop2","r","some","el","push","_iterator","Symbol","iterator","next","done","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_loop","_iterator2","color","Select","list","selectFirstByDefault","applySetting"],"mappings":"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","file":"apply.36ca5f71.js","sourcesContent":["import React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {Button, confirm, Input, notification, Select} from '@tencent/bere'\r\nimport Title from '@components/Title'\r\n\r\nclass App extends React.Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      site:'',\r\n      shop:'',\r\n      version:''\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.props.dispatch({ type: 'image/fetchRuleInfos' })\r\n  }\r\n  addRule = () => {\r\n    let that = this;\r\n    const {site,shop,version } = this.state\r\n    this.props.dispatch({\r\n      type: 'image/addVersion',\r\n      payload:{site,shop,version},\r\n      callback:function(code){\r\n        if(code !==0){\r\n          return\r\n        }\r\n        confirm({\r\n            caption: '添加版本成功',\r\n            text: '马上为该版本编辑规则？',\r\n            type: 'success'\r\n        }).then(result => {\r\n            if(result === 'cancel'){\r\n              // 点击取消\r\n            }\r\n            else{\r\n              that.props.dispatch({\r\n                type: 'image/change',\r\n                payload: { site:site,shop:shop,version: version,ver_com_key:`${site}_${shop}_${version}`}\r\n              })\r\n              that.props.history.replace('/suggest/image')\r\n            }\r\n        });\r\n      }\r\n    })\r\n  }\r\n\r\n  handleSiteChange = e => {\r\n    this.setState({site:e.target.value})\r\n  }\r\n  handleShopChange = e => {\r\n    this.setState({shop:e.target.value})\r\n  }\r\n  handleVersionChange = e => {\r\n    this.setState({version:e.target.value})\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <div className=\"main adc-manage-main\">\r\n        <div className='manage-area'>\r\n          <Title title='新建规则版本'></Title>\r\n          <div className=\"manage-area-main\">\r\n            <div className=\"manage-area-main-inner\">\r\n              <div className=\"tc-panel\">\r\n                <div className=\"tc-panel-bd\">\r\n                  <div className=\"param-box\">\r\n                    <div className=\"param-bd\">\r\n                      <p className=\"text\">规则版本由厂区、厂别、版本号3个字段组成，添加后不支持修改或删除，请谨慎填写。</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"tc-panel-ft\">\r\n                      <div>\r\n                        <ul className=\"form-list\">\r\n                          <li>\r\n                            <div className=\"form-label\">\r\n                              <label htmlFor=\"addSite\">厂区</label>\r\n                            </div>\r\n                            <Input\r\n                              id=\"addSite\"\r\n                              placeholder=\"如T1\"\r\n                              onChange={this.handleSiteChange}\r\n                              value={this.state.site}\r\n                            />\r\n                          </li>\r\n                          <li>\r\n                            <div className=\"form-label\">\r\n                              <label htmlFor=\"addShop\">厂别</label>\r\n                            </div>\r\n                            <Input\r\n                              id=\"addShop\"\r\n                              placeholder=\"如ARRAY\"\r\n                              onChange={this.handleShopChange}\r\n                              value={this.state.shop}\r\n                            />\r\n                          </li>\r\n                          <li>\r\n                            <div className=\"form-label\">\r\n                              <label htmlFor=\"addVersion\">版本</label>\r\n                            </div>\r\n                            <Input\r\n                              id=\"addVersion\"\r\n                              placeholder=\"如v1.0\"\r\n                              onChange={this.handleVersionChange}\r\n                              value={this.state.version}\r\n                            />\r\n                          </li>\r\n                        </ul>\r\n                      </div>\r\n                      <div style={{\"fontSize\":\"14px\"}}>&nbsp;</div>\r\n                  <Button className=\"tc-15-btn m\"\r\n                     disabled={(!(this.state.site&&this.state.shop&&this.state.version))}\r\n                     loading={this.props.loading}\r\n                     onClick={this.addRule}\r\n                  >添加新规则版本</Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ apply ,image}) => {\r\n  return {\r\n    loading:apply.loading,\r\n    ruleInfos:image.ruleInfos,\r\n    site:image.site,\r\n    shop:image.shop,\r\n    version:image.version\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(App)\r\n\r\n","\r\nimport App from './containers/App'\r\nexport default App\r\n\r\n","\r\nimport React from 'react'\r\n\r\nclass ManageAreaTitle extends React.Component {\r\n  render() {\r\n    const {title} = this.props\r\n    return (\r\n      <div className=\"manage-area-title\"><h2>{title}</h2>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default ManageAreaTitle\r\n","import React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {Button, Select} from '@tencent/bere'\r\nimport Title from '@components/Title'\r\n\r\nclass App extends React.Component {\r\n  componentDidMount() {\r\n    this.props.dispatch({ type: 'image/fetchRuleInfos' })\r\n  }\r\n  applySetting = () => {\r\n    const {site,shop,version } = this.props\r\n    this.props.dispatch({\r\n      type: 'apply/applySetting',\r\n      payload:{site,shop,version}\r\n    })\r\n  }\r\n\r\n  handleSiteChange = site => {\r\n    this.props.dispatch({\r\n      type: 'image/change',\r\n      payload: { site, shop: '', version: ''}\r\n    })\r\n  }\r\n  handleShopChange = shop => {\r\n    this.props.dispatch({\r\n      type: 'image/change',\r\n      payload: { shop: shop, version: ''}\r\n    })\r\n  }\r\n  handleVersionChange = version => {\r\n    const { site,shop} = this.props\r\n    this.props.dispatch({\r\n      type: 'image/change',\r\n      payload: { version: version,ver_com_key:`${site}_${shop}_${version}`}\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {site,shop,version,ruleInfos } = this.props\r\n    let siteList=[],shopList=[],versionList=[]\r\n    for( let r of ruleInfos){\r\n      if(r[\"site\"] && !siteList.some(el=>el[\"value\"]==r[\"site\"])){\r\n        siteList.push({text:r[\"site\"],value:r[\"site\"]})\r\n      }\r\n    }\r\n    if(site){\r\n      for(let r of ruleInfos){\r\n        if(r[\"site\"]==site){\r\n          if(!shopList.some(el=>el[\"value\"]==r[\"shop\"])){\r\n            shopList.push({text:r[\"shop\"],value:r[\"shop\"]})\r\n          }\r\n          if(shop && r[\"shop\"]==shop && !versionList.some(el=>el[\"value\"]==r[\"version\"])){\r\n            versionList.push({text:r[\"version\"],value:r[\"version\"]})\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className=\"main adc-manage-main\">\r\n        <div className='manage-area'>\r\n          <Title title='规则生效'></Title>\r\n          <div className=\"manage-area-main\">\r\n            <div className=\"manage-area-main-inner\">\r\n              <div className=\"tc-panel\">\r\n                <div className=\"tc-panel-bd\">\r\n                  <div className=\"param-box\">\r\n                    <div className=\"param-bd\">\r\n                      <p className=\"text\">为了避免设置项频繁刷新，请在配置Image信息和Glass开单建议后，点击下方按钮应用当前配置。</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"tc-panel-ft\">\r\n                      <div>\r\n                        <span style={{\"color\":\"red\"}}>选择规则版本：</span>\r\n                          <Select\r\n                            className=\"tc-15-select s\"\r\n                            value={site}\r\n                            list={siteList}\r\n                            selectFirstByDefault={false}\r\n                            placeholder=\"请选择厂区\"\r\n                            onChange={this.handleSiteChange}\r\n                          />\r\n                          <Select\r\n                            className=\"tc-15-select s\"\r\n                            value={shop}\r\n                            list={shopList}\r\n                            selectFirstByDefault={false}\r\n                            placeholder=\"请选择厂别\"\r\n                            onChange={this.handleShopChange}\r\n                            disabled={!site}\r\n                          />\r\n                          <Select\r\n                            className=\"tc-15-select s\"\r\n                            value={version}\r\n                            list={versionList}\r\n                            selectFirstByDefault={false}\r\n                            placeholder=\"请选择版本\"\r\n                            onChange={this.handleVersionChange}\r\n                            disabled={!shop}\r\n                          />\r\n                        </div>\r\n                        <div style={{\"fontSize\":\"14px\"}}>&nbsp;</div>\r\n                  <Button className=\"tc-15-btn m\"\r\n                     disabled={(!(site&&shop&&version))}\r\n                     loading={this.props.loading}\r\n                     onClick={this.applySetting}\r\n                  >应用当前配置</Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ apply ,image}) => {\r\n  return {\r\n    loading:apply.loading,\r\n    ruleInfos:image.ruleInfos,\r\n    site:image.site,\r\n    shop:image.shop,\r\n    version:image.version\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(App)\r\n\r\n"],"sourceRoot":""}