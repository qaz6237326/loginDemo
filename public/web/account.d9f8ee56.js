(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1059:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1210)).default;t.default=r},1060:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),a=n(24),o=n(55);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,u(t).call(this))).state={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.default.Component),s(t,[{key:"render",value:function(){return r.default.createElement("div",{className:"rejudge main adc-manage-main"},r.default.createElement("div",{className:"manage-area"},r.default.createElement("div",{className:"top-title-box"},r.default.createElement("div",null,"历史回放数据报表"))))}}]),s(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}}]),t}(),d=(0,o.withRouter)((0,a.connect)(function(e){e.historicalDataModel;return{}})(p));t.default=d},1111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.label,n=e.value,o=e.onChange,l=e.groupType,i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,["label","value","onChange","groupType"]);return r.default.createElement("label",{className:"form-ctrl-label",style:{fontSize:"12px"}},r.default.createElement("input",a({type:"checkbox",className:"tc-15-checkbox",onChange:function(e){o(e,e.target.checked,e.target.value)},value:n,grouptype:l},i)),t)};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},1198:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),a=n(24),o=n(25);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=[{key:"one_level_primary",title:"一级功能项"},{key:"two_level_primary",title:"二级功能项"},{key:"three_level_primary",title:"三级功能项"},{key:"general",title:"普通账户权限"},{key:"admin",title:"管理员账户权限"},{key:"develop",title:"开发者账户权限"}],d=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(s(s(n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?s(e):t}(this,u(t).call(this,e)))),"handleBack",function(){n.props.dispatch({type:"account/change",payload:{isAuthorityList:!1}})}),n.state={funList:[{one_level_primary:"实时监控",two_level_primary:"无",three_level_primary:"无",general:"0",admin:"0",develop:"0"},{one_level_primary:"布控策略",two_level_primary:"无",three_level_primary:"无",general:"0",admin:"0",develop:"0"},{one_level_primary:"检索追溯",two_level_primary:"无",three_level_primary:"无",general:"0",admin:"0",develop:"0"},{one_level_primary:"客群分析",two_level_primary:"无",three_level_primary:"无",general:"0",admin:"0",develop:"0"},{one_level_primary:"用户分析",two_level_primary:"无",three_level_primary:"无",general:"0",admin:"0",develop:"0"},{one_level_primary:"资源",two_level_primary:"设备管理",three_level_primary:"查看设备和分组信息",general:"0",admin:"0",develop:"0"},{one_level_primary:"资源",two_level_primary:"设备管理",three_level_primary:"编辑和管理设备",general:"0",admin:"0",develop:"0"},{one_level_primary:"资源",two_level_primary:"人脸库管理",three_level_primary:"查看人脸信息",general:"0",admin:"0",develop:"0"},{one_level_primary:"资源",two_level_primary:"人脸库管理",three_level_primary:"编辑和管理人脸库",general:"0",admin:"0",develop:"0"},{one_level_primary:"系统",two_level_primary:"账户权限管理",three_level_primary:"无",general:"0",admin:"0",develop:"0"},{one_level_primary:"系统",two_level_primary:"历史记录",three_level_primary:"无",general:"0",admin:"0",develop:"0"},{one_level_primary:"系统",two_level_primary:"操作日志",three_level_primary:"无",general:"0",admin:"0",develop:"0"},{one_level_primary:"运维管理",two_level_primary:"设备服务器管理",three_level_primary:"无",general:"0",admin:"0",develop:"0"},{one_level_primary:"开发者管理平台",two_level_primary:"无",three_level_primary:"无",general:"0",admin:"0",develop:"0"}]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"account/fetchAuthorityList"})}},{key:"render",value:function(){var e=this;return this.props.funList.length>0&&this.state.funList.map(function(t,n){var r={general:"0",admin:"0",develop:"0"};return["admin","develop","general"].map(function(t){var a=e.props.funList.find(function(e){return t==e.user_type});r[t]=a["fun".concat(n+1)]}),t.admin=r.admin,t.general=r.general,t.develop=r.develop,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){f(e,t,n[t])})}return e}({},t,r)}),this.props.isAuthorityList?r.default.createElement("div",{className:"main"},r.default.createElement("div",{className:"manage-area"},r.default.createElement("div",null,r.default.createElement("div",{className:"manage-area-title secondary-title"},r.default.createElement("a",{className:"back-link",href:"javascript:;",title:"返回",onClick:this.handleBack},r.default.createElement("i",{className:"btn-back-icon"})),r.default.createElement("span",{className:"line-icon"},"|"),r.default.createElement("h2",null,"功能权限配置清单")),r.default.createElement("div",{className:"manage-area-main"},r.default.createElement(o.DataTable,{rowKey:"accountId",style:{minHeight:600},error:this.props.error,loading:this.props.isGroupLoading,columns:this.columns,data:this.state.funList}))))):null}},{key:"columns",get:function(){return o.DataTable.injectColumns(p,{one_level_primary:{render:function(e,t){return"运维管理"==t.one_level_primary?r.default.createElement("div",null,r.default.createElement("span",null,t.one_level_primary),"运维管理"==t.one_level_primary?r.default.createElement("div",{className:"tc-15-bubble-icon tc-15-triangle-align-start "},r.default.createElement("i",{className:"tc-icon icon-what"}),r.default.createElement("div",{className:"tc-15-bubble tc-15-bubble-bottom"},r.default.createElement("div",{className:"tc-15-bubble-inner"},r.default.createElement("p",null,"相关解释说明内容")))):null):r.default.createElement("div",null,r.default.createElement("span",null,t.one_level_primary),"开发者管理平台"==t.one_level_primary?r.default.createElement("div",{className:"tc-15-bubble-icon tc-15-triangle-align-start "},r.default.createElement("i",{className:"tc-icon icon-what"}),r.default.createElement("div",{className:"tc-15-bubble tc-15-bubble-bottom"},r.default.createElement("div",{className:"tc-15-bubble-inner"},r.default.createElement("p",null,"相关解释说明内容")))):null)}},two_level_primary:{render:function(e,t){return r.default.createElement("div",null,"无"==t.two_level_primary?r.default.createElement("span",{className:"text-weak"},t.two_level_primary):r.default.createElement("span",null,t.two_level_primary))}},three_level_primary:{render:function(e,t){return r.default.createElement("div",null,"无"==t.three_level_primary?r.default.createElement("span",{className:"text-weak"},t.three_level_primary):r.default.createElement("span",null,t.three_level_primary))}},general:{render:function(e,t){return r.default.createElement("div",null,"0"==t.general?r.default.createElement("span",{className:"text-danger"},"不可操作"):r.default.createElement("span",null,"有"))}},admin:{render:function(e,t){return r.default.createElement("div",null,"0"==t.admin?r.default.createElement("span",{className:"text-overflow text-danger"},"不可操作"):r.default.createElement("span",null,"有"))}},develop:{render:function(e,t){return r.default.createElement("div",null,"0"==t.develop?r.default.createElement("span",{className:"text-danger"},"不可操作"):r.default.createElement("span",null,"有"))}}})}}]),t}(),m=(0,a.connect)(function(e){var t=e.account;return{funList:t.authorityList,isAuthorityList:t.isAuthorityList,isGroupLoading:t.isGroupLoading}})(d);t.default=m},1199:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),a=n(24);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(c(c(n=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}(this,i(t).call(this,e)))),"handleChangeUserName",function(e){n.setState({user_name:e.target.value})}),s(c(c(n)),"handleChangePwd",function(e){n.setState({pwd:e.target.value})}),s(c(c(n)),"handleTestPwd",function(e){n.setState({testPwdLetter:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,}$/.test(e.target.value)})}),s(c(c(n)),"handleTestUserName",function(e){n.setState({testUsernameLength:/\S{1,}/.test(e.target.value)})}),s(c(c(n)),"handleChangeusertype",function(e){n.setState({groupId:e.target.value})}),s(c(c(n)),"handleAccountDetail",function(){n.state.user_name&&sessionStorage.setItem("newUserName",n.state.user_name),n.state.pwd&&sessionStorage.setItem("newPwd",n.state.pwd),n.props.dispatch({type:"account/change",payload:{isAuthorityList:!0}})}),s(c(c(n)),"addEnforceAccount",function(){var e=c(c(n));1==n.state.testPwdLetter&&1==n.state.testUsernameLength&&""!=n.state.user_name&&null!=n.state.pwd&&void 0!=n.state.groupId&&(n.storageTemporaryClear(),n.props.dispatch({type:"account/change",payload:{isAddAccount:!1}}),n.props.dispatch({type:"account/fetchAddAccount",payload:{username:n.state.user_name,password:n.state.pwd,groupId:Number(n.state.groupId)},callback:function(){e.props.dispatch({type:"account/fetchAccount",payload:{page:1,num:10}})}}))}),s(c(c(n)),"exitAddAccount",function(){n.storageTemporaryClear(),n.props.dispatch({type:"account/change",payload:{isAddAccount:!1}})}),n.state={user_name:"",pwd:"",groupId:"",testPwdLetter:!0,testUsernameLength:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"componentDidMount",value:function(){sessionStorage.getItem("newUserName")&&this.setState({user_name:sessionStorage.getItem("newUserName")}),sessionStorage.getItem("newPwd")&&this.setState({pwd:sessionStorage.getItem("newPwd")})}},{key:"storageTemporaryClear",value:function(){sessionStorage.clear(),this.setState({user_name:"",pwd:"",groupId:"general",testPwdLetter:!0,testUsernameLength:!0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.groupList,a=t.currentAccountInfo;return r.default.createElement("div",{className:"tc-15-table-panel"},r.default.createElement("div",{className:""},r.default.createElement("div",{className:"tc-15-table-fixed-body"},r.default.createElement("table",{className:"tc-15-table-box tc-15-table-rowhover",style:{tableLayout:"fixed"}},r.default.createElement("colgroup",null,r.default.createElement("col",null),r.default.createElement("col",null),r.default.createElement("col",null),r.default.createElement("col",null),r.default.createElement("col",{style:{width:"150px"}})),r.default.createElement("tbody",{className:"table-tbody"},r.default.createElement("tr",{className:""},r.default.createElement("td",{role:"presentation"},r.default.createElement("div",{className:0==this.state.testUsernameLength?"is-error":"form-unit"},r.default.createElement("input",{type:"text",placeholder:"请输入账户名",className:"tc-15-input-text m",value:this.state.user_name,onChange:this.handleChangeUserName,onBlur:this.handleTestUserName}),0==this.state.testUsernameLength?r.default.createElement("p",{className:"form-input-help"},"账户不能为空"):"")),r.default.createElement("td",{role:"presentation"},r.default.createElement("div",{className:0==this.state.testPwdLetter?"is-error":"form-unit"},r.default.createElement("input",{type:"text",minLength:"8",placeholder:"请输入账户密码",className:"tc-15-input-text m",value:this.state.pwd,onChange:this.handleChangePwd,onBlur:this.handleTestPwd}),0==this.state.testPwdLetter?r.default.createElement("p",{className:"form-input-help"},"必须8个字符以上且同时包含数字和字母"):"")),r.default.createElement("td",{role:"presentation"},r.default.createElement("div",{className:"form-unit"},r.default.createElement("select",{defaultValue:n[0].id,className:"tc-15-select m",value:this.state.groupId,onChange:function(t){return e.handleChangeusertype(t)}},n.map(function(e){return 10==a.groupId&&10!=e.id?r.default.createElement("option",{value:e.id,key:e.id},e.name):11==a.groupId&&12==e.id?r.default.createElement("option",{value:e.id,key:e.id},e.name):null})))),r.default.createElement("td",{role:"presentation"},r.default.createElement("div",null,r.default.createElement("span",{className:"text-overflow"},r.default.createElement("a",{href:"javascript:;",onClick:this.handleAccountDetail},"查看详情")))),r.default.createElement("td",{role:"presentation"},r.default.createElement("div",null,r.default.createElement("a",{href:"javascript:;",onClick:this.addEnforceAccount}," 确定 "),r.default.createElement("a",{href:"javascript:;",onClick:this.exitAddAccount}," 取消 ")))))))))}}]),t}(),p=(0,a.connect)(function(e){var t=e.account;return{query:t.query,groupList:t.groupList,currentAccountInfo:t.currentAccountInfo}})(f);t.default=p},1200:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),a=n(24);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,u(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"renderScope",value:function(e,t){var n=this.props.scopesList.find(function(t){return t.scope==e.trim()});if(n)return r.default.createElement("span",{className:"text-overflow",key:t},n.description)}},{key:"render",value:function(){var e=this,t=this.props.scopes;if(null==t)return null;var n=t.split(",");return r.default.createElement("div",null,r.default.createElement("p",{className:"text-label"},n.map(function(t,n){return e.renderScope(t,n)})))}}]),t}(),f=(0,a.connect)(function(e){return e})(s);t.default=f},1201:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(0));a(n(1)),a(n(6));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}(this,i(t).call(this,e))).state={isShow:!1},n.show=n.show.bind(c(c(n))),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.Component),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"show",value:function(){this.setState({isShow:!this.state.isShow})}},{key:"render",value:function(){var e=this.props,t=(e.position,e.offset,e.children),n=(e.className,e.style),a=e.content,o=(e.trigger,this.state.isShow);return n=Object.assign({},{fontSize:"inherit"},n),r.default.createElement("div",{className:"tc-15-bubble-icon",style:n,onClick:this.show},t,o&&a)}}]),t}();t.default=s},1202:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(0)),a=(o(n(1111)),n(512));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(s(s(n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?s(e):t}(this,u(t).call(this,e)))),"handleClickOutside",function(){n.setState({showMenu:!1})}),n.state={showMenu:!1,checkedList:e.defaultCheckedList?e.defaultCheckedList:[],lastTimeCheckedList:e.defaultCheckedList?e.defaultCheckedList:[],selectedText:""},n.OnDropList=n.OnDropList.bind(s(s(n))),n.onSubmit=n.onSubmit.bind(s(s(n))),n.onCancel=n.onCancel.bind(s(s(n))),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.default.Component),function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,[{key:"setDefault",value:function(e){var t=e.checkable,n=e.value,r=e.list;if(!t){var a=r.find(function(e){return e.value==n});a&&this.setState({selectedText:a.text})}}},{key:"componentDidMount",value:function(){this.setDefault(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.list&&this.props.list&&e.list.toString()!=this.props.list.toString()&&(this.setState({checkedList:e.defaultCheckedList?e.defaultCheckedList:[],lastTimeCheckedList:[],selectedText:e.label}),this.setDefault(e)),e.value!=this.props.value&&this.setDefault(e)}},{key:"OnDropList",value:function(){var e=[];this.state.lastTimeCheckedList.forEach(function(t){e.push(t)}),this.setState({showMenu:!0,checkedList:e})}},{key:"onSubmit",value:function(){this.props.onSubmit&&this.props.onSubmit(this.state.checkedList);var e=[];this.state.checkedList.forEach(function(t){e.push(t)}),this.setState({showMenu:!1,lastTimeCheckedList:e})}},{key:"onCancel",value:function(){this.setState({showMenu:!1})}},{key:"onCheck",value:function(e){var t=this.state.checkedList;if(t.length>0){var n=t.indexOf(e);-1!=n?t.splice(n,1):t.push(e)}else t.push(e);this.setState({checkedList:t})}},{key:"onSelect",value:function(e){this.props.onSubmit&&this.props.onSubmit(e.value),this.props.onSubmitAll&&this.props.onSubmitAll(e),this.setState({showMenu:!1,selectedText:e.text})}},{key:"renderItem",value:function(e,t){var n=this,a=this.props.checkable,o=this.state.checkedList,l=!1;return o&&o.length>0&&(l=-1!=o.indexOf(e.value)),r.default.createElement("li",{role:"presentation",className:"tc-15-optgroup",key:t},a&&r.default.createElement("label",{className:"tc-15-checkbox-wrap",style:{fontSize:"12px"}},r.default.createElement("input",{type:"checkbox",className:"tc-15-checkbox",value:e.value,checked:l,onChange:function(t){n.onCheck(e.value)}}),e.text),!a&&r.default.createElement("a",{role:"menuitem",onClick:function(t){n.onSelect(e)}},e.text))}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,a=t.checkable,o=t.label,l=t.emptyText,i=t.disabled,u=this.state,c=u.showMenu,s=(u.checkedList,u.selectedText),f=o;a||""==s||(f=s);var p="tc-15-dropdown tc-15-dropdown-btn-style";return i&&(p+=" disabled"),r.default.createElement("div",{className:p,ref:"droplist"},r.default.createElement("a",{onClick:this.OnDropList,className:"tc-15-dropdown-link"},r.default.createElement("em",null,f),r.default.createElement("i",{className:"caret"})),c&&r.default.createElement("div",{className:"tc-15-filtrateu",style:{width:"180px"}},r.default.createElement("ul",{className:"tc-15-filtrate-menu",role:"menu"},n.map(function(t,n){return e.renderItem(t,n)})),a&&n.length>0&&r.default.createElement("div",{className:"tc-15-filtrate-ft"},r.default.createElement("button",{className:"tc-15-btn m",onClick:this.onSubmit},"确定"),r.default.createElement("button",{className:"tc-15-btn m weak",onClick:this.onCancel},"取消")),0==n.length&&r.default.createElement("div",{style:{padding:"10px"},className:"text-weak"},l)))}}]),t}();f(p,"defaultProps",{list:[],checkable:!1,label:"请选择",defaultCheckedList:[],value:"",onSubmit:null,onSubmitAll:null,emptyText:"无对应结果",disabled:!1});var d=(0,a.enhanceWithClickOutside)(p);t.default=d},1203:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,i(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.default.Component),function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(t,[{key:"render",value:function(){return r.default.createElement("li",{className:"pure-text-row"},r.default.createElement("div",{className:"form-label"},r.default.createElement("label",{htmlFor:""},this.props.label)),r.default.createElement("div",{className:"form-input"},r.default.createElement("p",{className:"text"},this.props.text)))}}]),t}();t.default=c,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(c,"defaultProps",{label:"",text:""})},1204:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.libsMap=t.maleMap=t.hairMap=t.maskMap=t.ageList=t.malelist=void 0;t.malelist=[{text:"全部性别",value:"-1"},{text:"男",value:"0"},{text:"女",value:"1"},{text:"未知",value:"2"}];t.ageList=[{text:"全部年龄",value:"-1"},{text:"0-17",value:"0-17"},{text:"18-24",value:"18-24"},{text:"25-30",value:"25-30"},{text:"31-40",value:"31-40"},{text:"41-50",value:"41-50"},{text:"51-60",value:"51-60"},{text:"60以上",value:"60-100"}];t.maskMap={0:"无口罩",1:"有口罩","-1":"--"};t.hairMap={0:"短发",1:"长发",2:"秃头","-1":"--"};t.maleMap={0:"男",1:"女",2:"未知","-1":"--"};t.libsMap={0:"陌生人",1:"VIP",2:"员工",3:"黑名单",4:"其他","-1":"--"}},1205:function(e,t,n){"use strict";function r(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}e.exports={typeString:r,isNull:function(e){return"null"===r(e)},isUndefined:function(e){return"undefined"===r(e)},isNumber:function(e){return"number"===r(e)},isString:function(e){return"string"===r(e)},isBoolean:function(e){return"boolean"===r(e)},isFunction:function(e){return"function"===r(e)},isArray:function(e){return"array"===r(e)},isDate:function(e){return"date"===r(e)},isRegExp:function(e){return"regexp"===r(e)},isObject:function(e){return"object"===r(e)}}},1206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combinationUserInfo=function(e){console.log("userinfo",e);var t=[];e&&e.forEach(function(e){t.push({img:e.capturePath,person_id:e.targetid,type:e.libTypeName,userinfo:e.targetName,face_total:e.appearCount+"次",cam_count:e.cameraCount+"台",cost_time:Math.round(e.period/60)+"分钟",start_time:e.firstTime,end_time:e.lastTime,_operation:1})});return t},t.filterCameraTreeInfo=function(e){var t=[],n=0;return function e(t,a){n++,t.forEach(function(t){if(r.default.isArray(t.childs)&&t.childs){var o={text:t.name,value:t.id,type:t.type,parentgroup:t.parentgroup,childrenlist:[],level:n};e(t.childs,o.childrenlist),a.push(o)}else a.push({text:t.name,value:t.id,type:t.type,childrenlist:l(t.childs)||[],parentgroup:t.parentgroup,level:n})})}(e,t),t},t.getParentNodeByTag=function(e,t){var n=null;return function e(r){if(r.parentNode&&r.parentNode!=document.documentElement){var a=r.parentNode;a.tagName.toLowerCase()==t?n=a:e(a)}}(e),n},t._deepCopy=l,t.filterUserDetail=function(e,t,n){var r={},o=e,l=o?o.hairLength:"-1",u=o&&o.faceLibid?o.faceLibid:"--",c=o?o.mask:"-1",s=o?o.age:"--",f=o?o.gender:"-1";50===f?f=2:f>=50?f=0:f<=50&&(f=1);var p=i(t,n);return r.baseInfo={type:u,imgUrl:p.img,age:s,male:a.maleMap[f],hair_length:a.hairMap[l],mask:a.maskMap[c],face_total:p.face_total,cam_count:p.cam_count,cost_time:p.cost_time},r.time_info=e.time_info,r},t.getUserInfoByPersonID=i,t.filterTrackDayData=function(e){var t=[];return Object.keys(e).forEach(function(n){t.push(e[n])}),t},t.filterGuestData=function(e){var t=e.age,n=e.gender,r=[],a=[],o=[];return t.forEach(function(e){for(var t in e)o.push(t)}),o.forEach(function(e,n){r.push({age:e,total:t[n][e].total,ratio:t[n][e].ratio})}),Object.keys(n).forEach(function(e){a.push({male:e,total:n[e].total,ratio:n[e].ratio})}),e.age=r,e.gender=a,e},t.prepend=function(e){return l(e)},t.flattenToNode=function e(t){var n=[];t.forEach(function(t){t.childrenlist&&t.childrenlist.length>0?n=n.concat(e(t.childrenlist)):n.push(t)});return n},t.flattenToGroup=function e(t){var n=[];t.forEach(function(t){"group"==t.type&&(n.push(t),t.childrenlist&&(n=n.concat(e(t.childrenlist))))});return n},t.pushParams=function(e,t,n,r){e.push({name:t,op:n,val:r})};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1205)),a=n(1204);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){var t,n,r,a,i=window.Object.prototype.hasOwnProperty;if("object"!==o(e)||null==e||"number"==typeof e.nodeType)t=e;else if("number"==typeof e.length)for(t=[],n=0,r=e.length;n<r;n++)i.call(e,n)&&(t[n]=l(e[n]));else for(a in t={},e)i.call(e,a)&&(t[a]=l(e[a]));return t}function i(e,t){for(var n=0;n<e.length;n++)if(e[n].person_id==t)return e[n]}},1207:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),a=i(n(1111)),o=n(1206),l=n(512);function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(p(p(n=function(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?p(e):t}(this,s(t).call(this,e)))),"handleClickOutside",function(){n.setState({showMenu:!1,keyword:"",isSearch:!1})}),n.state={showMenu:!1,label:"选择设备",searchTreeList:"",keyword:"",isSearch:!1},n.renderChildrenList=n.renderChildrenList.bind(p(p(n))),n.onArrowChange=n.onArrowChange.bind(p(p(n))),n.OnDropList=n.OnDropList.bind(p(p(n))),n.onCheckBoxChange=n.onCheckBoxChange.bind(p(p(n))),n.onSubmit=n.onSubmit.bind(p(p(n))),n.HandleSearch=n.HandleSearch.bind(p(p(n))),n.onSearchChange=n.onSearchChange.bind(p(p(n))),n.onSearchKeyUp=n.onSearchKeyUp.bind(p(p(n))),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.default.Component),function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(t,[{key:"onSubmit",value:function(){for(var e={group:[],cameras:[]},t=this.refs.droptree.querySelectorAll("input[type=checkbox]"),n=0;n<t.length;n++)if(t[n].checked){var r=t[n].getAttribute("grouptype");r&&"group"===r?e.group.push(t[n].value):e.cameras.push(t[n].value)}this.props.onSubmit&&(console.log(e),this.props.onSubmit(e)),this.setState({keyword:"",isSearch:!1,showMenu:!1,label:0==e.cameras.length?"选择设备数为0":"已选"+e.cameras.length+"个设备"})}},{key:"OnDropList",value:function(){this.setState({showMenu:!this.state.showMenu})}},{key:"onCheckBoxChange",value:function(e,t,n){!function e(n){var r=n.nextSibling;if(r&&"ul"==r.tagName.toLowerCase()){for(var a=r.querySelectorAll("input[type=checkbox]"),o=0;o<a.length;o++)a[o].checked=t;r&&e(r)}}((0,o.getParentNodeByTag)(e.target,"a"))}},{key:"onArrowChange",value:function(e){var t=e.currentTarget.getAttribute("arrow");!function e(n){var r=n.nextSibling;if(r&&"ul"==r.tagName.toLowerCase()){var a=r;if("right"==t){if(a.style.display="block",n.setAttribute("arrow","down"),"a"==n.tagName.toLowerCase()){var o=n.querySelector("i");o&&(o.className="icon-arrow-down")}}else if(a.style.display="none",n.setAttribute("arrow","right"),"a"==n.tagName.toLowerCase()){var l=n.querySelector("i");l&&(l.className="icon-arrow-right")}}r&&e(r)}(e.currentTarget)}},{key:"onSearchChange",value:function(e){this.setState({keyword:e.target.value}),""==e.target.value&&this.setState({isSearch:!1})}},{key:"SearchTree",value:function(e,t){var n=this,r=[];return e.map(function(e){if("group"==e.type){var a=n.SearchTree(e.childrenlist,t);a&&a.length>0&&(e.childrenlist=a,r.push(e))}else-1!=e.text.indexOf(t)&&r.push(e)}),r}},{key:"isSearched",value:function(e,t){var n=this;return!this.state.isSearch||t.find(function(t){return t.value==e.value||n.isSearched(e,t.childrenlist)})}},{key:"HandleSearch",value:function(){var e=this.state.keyword;if(""!=e){var t=this.props.treeList,n=this.SearchTree(t,e);this.setState({isSearch:!0,searchTreeList:n})}}},{key:"onSearchKeyUp",value:function(e){13==e.which&&this.HandleSearch()}},{key:"renderChildrenList",value:function(e,t){var n=this,o=this.props.arrow,l=this;t++;var i=this.state.searchTreeList;return e.map(function(e,u){var c=n.isSearched(e,i),s="right"==o?"none":"block";return c||(s="none"),r.default.createElement("ul",{role:"menu",id:"list_1",style:{display:s},className:"menu-sub",key:u},r.default.createElement("li",{role:"menuitem"},r.default.createElement("a",{id:"ul_a_"+u,"aria-selected":"false",role:"menuitemradio",className:"menu-item menu-lv"+t,onClick:n.onArrowChange,arrow:o},r.default.createElement("span",null,e.childrenlist.length>0&&r.default.createElement("i",{"aria-live":"polite",className:"icon-arrow-"+o}),r.default.createElement(a.default,{label:e.text,value:e.value,onChange:n.onCheckBoxChange,groupType:e.type}))),e.childrenlist.length>0&&l.renderChildrenList(e.childrenlist,t)))})}},{key:"render",value:function(){var e=this,t=this,n=this.props,o=n.treeList,l=n.arrow,i=n.hasfooter,u=n.canSearch,c=this.state,s=c.searchTreeList,f=c.isSearch;return r.default.createElement("div",{className:"form-input",ref:"droptree"},r.default.createElement("div",{className:"tc-15-dropdown tc-15-dropdown-btn-style tc-15-menu-active"},r.default.createElement("a",{href:"javascript:void(0);",className:"tc-15-dropdown-link",onClick:this.OnDropList},r.default.createElement("em",null,this.state.label),r.default.createElement("i",{className:"caret"})),r.default.createElement("div",{className:"tc-15-dropdown-menu",style:{display:this.state.showMenu?"block":"none"}},u&&r.default.createElement("div",{className:"search-box search-box-simple m"},r.default.createElement("div",{className:"search-input-wrap"},r.default.createElement("input",{placeholder:"搜索设备名",className:"tc-15-input-text search-input",style:{paddingLeft:"10px"},onChange:this.onSearchChange,onKeyUp:this.onSearchKeyUp})),r.default.createElement("input",{type:"button",value:"搜索",className:"search-btn",onClick:this.HandleSearch})),r.default.createElement("div",{className:"mod-team-list"},r.default.createElement("dl",{id:"aside_nav","aria-orientation":"vertical",role:"menu","aria-activedescendant":"list_a_2",className:" "},o.map(function(n,o){var i=e.isSearched(n,s);return r.default.createElement("dd",{role:"menuitem","aria-haspopup":"false","aria-expanded":"true",key:o,style:{display:i?"block":"none"}},r.default.createElement("a",{"aria-selected":"false",role:"menuitemradio",id:"list_a_0","aria-controls":"list_0",className:"menu-item menu-lv2",onClick:e.onArrowChange,arrow:l},r.default.createElement("span",null,n.childrenlist.length>0&&r.default.createElement("i",{"aria-live":"polite",className:"icon-arrow-"+l}),r.default.createElement(a.default,{label:n.text,value:n.value,onChange:e.onCheckBoxChange,groupType:n.type}))),n.childrenlist.length>0&&t.renderChildrenList(n.childrenlist,2))}))),r.default.createElement("div",{className:"btn-group",style:{display:!i||o.length<=0||f&&s.length<=0?"none":"block"}},r.default.createElement("button",{className:"tc-15-btn m",onClick:this.onSubmit},"确定"),r.default.createElement("button",{className:"tc-15-btn weak m",onClick:function(){e.setState({showMenu:!1,keyword:"",isSearch:!1})}},"取消")),o.length<=0&&r.default.createElement("div",{style:{padding:"10px"}},"暂无设备，请前往设备管理添加设备"),f&&s.length<=0&&r.default.createElement("div",{style:{padding:"10px"},className:"text-weak"},"无对应结果"))))}}]),t}();d(m,"defaultProps",{treeList:[],arrow:"right",hasfooter:!0,onSubmit:null,canSearch:!0});var h=(0,l.enhanceWithClickOutside)(m);t.default=h},1208:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DropDownTree",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"CheckBox",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"PureTextRow",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"DropDownList",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Popconfirm",{enumerable:!0,get:function(){return i.default}});var r=u(n(1207)),a=u(n(1111)),o=u(n(1203)),l=u(n(1202)),i=u(n(1201));function u(e){return e&&e.__esModule?e:{default:e}}},1209:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(0)),a=n(24),o=n(25),l=n(1208),i=c(n(1200)),u=c(n(1199));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=[{key:"username",title:"账户",editKey:"user_type"},{key:"pwd",title:"密码"},{key:"user_type",title:"账户类型"},{key:"rights",title:"账户权限"},{key:"_operation",title:"操作"}],b=function(e){var t=e.data,n=e.onOK,a=e.onCancel;return r.default.createElement("div",{className:"tc-15-confirm-popout tc-15-confirm-popout-top align-end",style:{position:"absolute",top:"25px",right:"-15px",zIndex:9999}},r.default.createElement("div",{className:"tc-15-confirm-popout-bd"},r.default.createElement("p",{className:"tc-15-msg"},r.default.createElement("strong",null,"确定删除当前账户？ "),r.default.createElement("br",null)," 删除后将无法恢复。")),r.default.createElement("div",{className:"tc-15-confirm-popout-ft"},r.default.createElement("button",{className:"tc-15-btn m",onClick:function(){return n(t)}},"删除"),r.default.createElement("button",{className:"tc-15-btn m weak",onClick:function(){return a()}},"取消")))},v=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(m(m(n=function(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?m(e):t}(this,p(t).call(this,e)))),"handleTestPwd",function(e){n.setState({testPwdLetter:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,}$/.test(e.target.value)})}),h(m(m(n)),"handleTestUserName",function(e){n.setState({testUsernameLength:/\S{1,}/.test(e.target.value)})}),h(m(m(n)),"handleDelOK",function(e){var t=m(m(n)),r=m(m(n)).page;n.props.dispatch({type:"account/fetchDelAccount",payload:{id:e.id},callback:function(){t.fetchAccount(r+1)}})}),h(m(m(n)),"handleDelCancel",function(){}),n.state={user_name:"",pwd:"",groupId:"",testPwdLetter:!0,testUsernameLength:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.default.Component),function(e,t,n){t&&f(e.prototype,t),n&&f(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"account/change",payload:{limit:10}}),this.props.dispatch({type:"account/fetchGroup"}),this.props.dispatch({type:"account/fetchAuthScopes"}),this.fetchAccount(1)}},{key:"fetchAccount",value:function(e){var t=this.props.limit;this.props.dispatch({type:"account/fetchAccount",payload:{page:e,results_per_page:t}})}},{key:"handlePageChange",value:function(e){this.props.dispatch({type:"account/change",payload:{page:e}}),this.fetchAccount(e+1)}},{key:"handlePerPageChange",value:function(e){this.props.dispatch({type:"account/change",payload:{limit:e}}),this.fetchAccount(1)}},{key:"changeInputUsername",value:function(e){this.setState({user_name:e.target.value})}},{key:"changeInputPwd",value:function(e){this.setState({pwd:e.target.value})}},{key:"changeSelectUsertype",value:function(e){this.setState({groupId:e.target.value})}},{key:"handleSave",value:function(e,t){var n=this;if(this.state.testPwdLetter&&this.state.testUsernameLength){var r={id:e.id,groupId:Number(this.state.groupId)};""!=this.state.pwd&&(r.password=this.state.pwd),this.props.dispatch({type:"account/fetchEditAccount",payload:{id:e.id,groupId:Number(this.state.groupId)},callback:function(){n.fetchAccount(n.props.page+1)}})}this.props.accountList[t].isEdit=!1,this.setState({pwd:"",groupId:""}),this.props.dispatch({type:"account/change",payload:{isEditAccount:!1}})}},{key:"handleExit",value:function(e,t){this.props.accountList[t].isEdit=!1,this.setState({user_name:"",pwd:"",groupId:""}),this.props.dispatch({type:"account/change",payload:{isEditAccount:!1}})}},{key:"handleEdit",value:function(e,t){this.setState({user_name:e.name,pwd:"",groupId:e.groupId});var n=this.props.accountList;(n=n.map(function(e,t){return e.isEdit&&console.log("这条数据进行过操作了"),e}))[t].isEdit=!0,this.props.dispatch({type:"account/change",payload:{isEditAccount:!0}})}},{key:"render",value:function(){var e=this;return r.default.createElement("div",null,r.default.createElement(o.DataTable,{style:{minHeight:500},rowKey:"accountId",error:this.props.error,loading:this.props.loading,columns:this.columns,data:this.props.accountList}),this.props.isAddAccount&&r.default.createElement(u.default,null),this.props.accountList&&this.props.accountList.length>0&&r.default.createElement(o.Pager,{total:this.props.total,current:this.props.page,perPageCount:this.props.limit,perPageCountList:[10,20,50],onPageChange:function(t){return e.handlePageChange(t)},onPerPageChange:function(t){return e.handlePerPageChange(t)}}))}},{key:"columns",get:function(){var e=this;return o.DataTable.injectColumns(y,{username:{render:function(e,t,n){return r.default.createElement("div",null,r.default.createElement("span",{className:"text-overflow"},t.username))}},pwd:{render:function(t,n,a){return n.isEdit?r.default.createElement("div",{className:0==e.state.testPwdLetter?"is-error":"form-unit"},r.default.createElement(o.Input,{className:"tc-15-input-text m",onChange:function(t){return e.changeInputPwd(t)},placeholder:n.pwd,value:e.state.pwd,onBlur:function(t){return e.handleTestPwd(t)}}),0==e.state.testPwdLetter?r.default.createElement("p",{className:"form-input-help"},"必须8个字符以上且同时包含数字和字母"):""):r.default.createElement("div",null,r.default.createElement("span",{className:"text-overflow"},"************"))}},rights:{render:function(t,n,a){var o=e.props.scopesList;return r.default.createElement(i.default,{scopesList:o,scopes:n.scopes})}},user_type:{render:function(t,n,a){var o=e.props,l=o.groupList,i=o.currentAccountInfo,u=l.find(function(e){return e.id==n.groupId});return n.isEdit?r.default.createElement("div",null,r.default.createElement("select",{defaultValue:n.groupId,className:"tc-15-select m",value:e.groupId,onChange:function(t){return e.changeSelectUsertype(t)}},l.map(function(e){return 10==i.groupId&&10!=e.id?r.default.createElement("option",{value:e.id,key:e.id},e.name):11==i.groupId&&12==e.id?r.default.createElement("option",{value:e.id,key:e.id},e.name):null}))):r.default.createElement("div",null,r.default.createElement("span",{className:"text-overflow"},u.name))}},_operation:{width:150,render:function(t,n,a){return 0==e.props.isAddAccount?0==e.props.isEditAccount?r.default.createElement(o.FlexibleList,null,n.isEdit?r.default.createElement(r.default.Fragment,null,r.default.createElement("a",{href:"javascript:;"}," 完成 "),r.default.createElement("a",{href:"javascript:;",onClick:function(){return e.handleExit(n,a)}}," 取消 ")):r.default.createElement(r.default.Fragment,null,r.default.createElement("a",{href:"javascript:;",onClick:function(){return e.handleEdit(n,a)}},"编辑"),r.default.createElement("div",{style:{position:"absolute",display:"inline"}},r.default.createElement(l.Popconfirm,{content:r.default.createElement(b,{data:n,onOK:e.handleDelOK,onCancel:e.handleDelCancel})},r.default.createElement("a",{href:"javascript:;"}," 删除 "))))):r.default.createElement(o.FlexibleList,null,n.isEdit?r.default.createElement(r.default.Fragment,null,r.default.createElement("a",{href:"javascript:;",onClick:function(){return e.handleSave(n,a)}}," 完成 "),r.default.createElement("a",{href:"javascript:;",onClick:function(){return e.handleExit(n,a)}}," 取消 ")):r.default.createElement(r.default.Fragment,null,r.default.createElement("a",{className:"disabled"},"编辑"),r.default.createElement("a",{className:"disabled"},"删除"))):r.default.createElement("div",null,r.default.createElement("a",{className:"disabled"}," 编辑"),r.default.createElement("a",{className:"disabled"}," 删除"))}}})}}]),t}(),g=(0,a.connect)(function(e){var t=e.account;return{accountList:t.accountList,page:t.page,limit:t.limit,total:parseInt(t.total),loading:t.isGroupLoading,isAddAccount:t.isAddAccount,isEditAccount:t.isEditAccount,completedEdit:t.completedEdit,groupList:t.groupList,scopesList:t.scopesList,currentAccountInfo:t.currentAccountInfo}})(v);t.default=g},1210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),a=n(24),o=i(n(1209)),l=i(n(1198));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(p(p(n=function(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?p(e):t}(this,s(t).call(this,e)))),"addAccount",function(){n.props.dispatch({type:"account/change",payload:{isAddAccount:!0}})}),d(p(p(n)),"handleAccountDetail",function(){n.props.dispatch({type:"account/change",payload:{isAuthorityList:!0}})}),d(p(p(n)),"handleWarningBlockHide",function(){n.setState({isWarningBlock:!1})}),d(p(p(n)),"handleAccountSearchInfo",function(e){n.setState({accountSearch:e.target.value}),console.log("搜索信息"+e.target.value)}),d(p(p(n)),"handleChangeSearch",function(){console.log("执行搜索操作")}),n.state={error:null,isLoaded:!1,isWarningBlock:!0,accountSearch:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.default.Component),function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"account/fetchCurrentAccount"})}},{key:"render",value:function(){return 12==this.props.currentAccountInfo.groupId?r.default.createElement("span",null,"你没有权限"):this.props.isAuthorityList?r.default.createElement(l.default,null):r.default.createElement("div",{className:"main"},r.default.createElement("div",{className:"manage-area"},r.default.createElement("div",{className:"manage-area-title"},r.default.createElement("h2",null,"账号权限")),r.default.createElement("div",{className:"manage-area-main"},1==this.state.isWarningBlock?r.default.createElement("div",{className:"tc-15-msg warning"},r.default.createElement("div",{className:"tip-info"},"账户类型和权限暂时不支持自定义， 不同类型的账户及拥有的权限请 ",r.default.createElement("a",{href:"javascript:;",onClick:this.handleAccountDetail},"点击查看")),r.default.createElement("a",{href:"javascript:;",onClick:this.handleWarningBlockHide,className:"tc-icon-btn"},r.default.createElement("i",{className:"close-icon"}))):null,r.default.createElement("div",{className:"tc-action-grid"},r.default.createElement("div",{className:"justify-grid"},r.default.createElement("div",{className:"col"},r.default.createElement("button",{className:"tc-15-btn m btn-add",onClick:this.addAccount},"新建账户")))),r.default.createElement(o.default,null))))}}]),t}(),h=(0,a.connect)(function(e){var t=e.account;return{isAuthorityList:t.isAuthorityList,currentAccountInfo:t.currentAccountInfo}})(m);t.default=h}}]);
//# sourceMappingURL=account.d9f8ee56.js.map